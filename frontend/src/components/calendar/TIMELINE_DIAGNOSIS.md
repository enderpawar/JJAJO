# 타임라인 시간 간격 및 좌표계 진단

## 1. 시간 ↔ 픽셀 공식 (단일 기준)

- **상수**: `HOUR_HEIGHT = 100` (1시간 = 100px)
- **시간 → 픽셀** (`timeToPixels`):
  - `px = hours * HOUR_HEIGHT + (minutes / 60) * HOUR_HEIGHT`
  - 예: 20:00 → 2000, 20:30 → 2050, 22:00 → 2200
- **픽셀 → 시간** (`pixelToTime`): 10분 단위로 반올림 후 위 공식의 역산

## 2. 타임라인 그리드 (시간선) 배치

- **정각 선** (실선): `gridTop = hour * HOUR_HEIGHT - positionOffset`
  - 20:00 선 → `2000 - positionOffset` px
  - 22:00 선 → `2200 - positionOffset` px
- **30분 선** (점선): `gridTop + 50` → 각 시의 **50분** 위치 (예: 20:50)
- 그리드와 카드는 **같은 컨테이너** (`absolute inset-0 z-0`) 안에서 **같은 `positionOffset`** 사용.

**결론**: 타임라인은 **1시간 = 100px**, **정각(:00) + 50분(:50)** 만 선으로 그리며, 공식상 시간 간격은 올바르게 표시되고 있음.

## 3. 카드 배치와의 일치 여부

- 카드 top: `yTop = startPixel - positionOffset`, `startPixel = timeToPixels(task.startTime)`
- 따라서 **그리드와 카드는 동일한 공식·동일한 원점**을 사용 → 이론상 정확히 일치해야 함.

## 4. 확인된 이슈 및 개선점

### 4.1 시간 레이블 시각 정렬

- **현재**: 시간 레이블("20:00" 등)에 `-top-3` (Tailwind ≈ -12px) 적용 → **선보다 12px 위**에 텍스트가 위치.
- **영향**: “20:00” 글자가 20:00 선과 한눈에 딱 맞아 보이지 않을 수 있음 (레이블이 선 위로 떠 있음).
- **개선 방향**: 레이블을 선과 수직 중앙 정렬하려면 `-top-3` 대신 `-translate-y-1/2` 등으로 선 기준 중앙에 두도록 변경 가능.

### 4.2 30분선 없음

- 현재는 **:00(실선)**, **:50(점선)** 만 있음. **:10, :20, :30, :40** 구간에는 선이 없음.
- 10분 단위 드래그 스냅과 맞추려면 :10, :20, :30, :40에 얇은 보조선을 넣는 선택이 가능 (표시만 추가, 좌표계는 그대로).

### 4.3 과거 숨기기 시 좌표 일치

- `positionOffset = currentTimePosition - HOUR_HEIGHT` (과거 숨기기 시)
- 그리드·카드·현재시간선 모두 `- positionOffset` 을 동일 적용 → **좌표계 일치**.

## 5. 요약

- **시간 간격**: 1시간 = 100px로 일관되게 적용됨. 타임라인이 잘못된 시간 간격을 표시하는 로직 오류는 없음.
- **카드 vs 타임라인**: 같은 `timeToPixels`·`positionOffset` 사용으로, 카드 배치 방식과 타임라인 시간축은 수학적으로 일치함.
- **추가로 점검할 부분**: (1) 시간 레이블의 시각적 위치(-top-3), (2) 필요 시 10분 단위 보조선 추가.
